image: Ubuntu1804

stack: node 16

branches:
  only:
    - main

cache: node_modules

install:
  - npm install

build: off

test_script:
  - npm run lint && npm test

deploy:
  release: v$(appveyor_build_version)
  provider: GitHub
  auth_token:
    secure: GITHUB_TOKEN
  artifact: /.*\.nupkg/
  force_update: true
  draft: false
  prerelease: false
  on:
    branch: main
    appveyor_repo_tag: true